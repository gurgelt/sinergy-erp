/* base.css - Estrutura Principal, Sidebar e Ícones (Versão Final) */

/* Reset básico */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Arial, sans-serif;
    display: flex;
    flex-direction: column;
    background-color: #f5f7fa;
    min-height: 100vh;
    overflow-x: hidden;
}

/* === SIDEBAR (CABEÇALHO) === */
.cabecalho {
    width: 240px; /* Largura Original */
    /* Seu degradê original */
    background: linear-gradient(135deg, #24384d, #2a79ad);
    height: 100vh;
    position: fixed;
    left: 0;
    top: 0;
    box-shadow: 4px 0 15px rgba(0, 0, 0, 0.15); /* Sombra um pouco mais suave */
    color: white;
    z-index: 1000;
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Animação fluida */
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    overflow-x: visible; /* Permite submenu flutuar */
}

/* Scrollbar fina e elegante para o menu */
.cabecalho::-webkit-scrollbar {
    width: 4px;
}
.cabecalho::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}

/* === ÁREA DO LOGO E BOTÃO === */
.logo-container {
    padding: 0 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 90px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    background-color: rgba(0, 0, 0, 0.1); /* Leve escurecimento no topo */
    margin-bottom: 10px;
    flex-shrink: 0;
}

.logo-link {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: white;
    overflow: hidden;
    white-space: nowrap;
    transition: opacity 0.2s, width 0.2s;
}

.sidebar-logo {
    max-height: 80px; /* Levemente maior */
    max-width: 170px;
    object-fit: contain;
}

/* Botão Hambúrguer (Toggle) */
.btn-toggle-menu {
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.8);
    font-size: 20px;
    cursor: pointer;
    padding: 8px;
    border-radius: 4px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 35px;
    height: 35px;
}

.btn-toggle-menu:hover {
    background-color: rgba(255, 255, 255, 0.15);
    color: white;
}

/* === CONTEÚDO PRINCIPAL === */
.conteudo-principal {
    margin-left: 240px;
    margin-top: 60px;
    padding: 25px;
    transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    width: auto;
    flex-grow: 1;
}

/* === TOP BAR === */
.top-bar {
    height: 60px;
    background-color: #ffffff;
    border-bottom: 1px solid #e2e8f0;
    display: flex;
    align-items: center;
    padding: 0 25px;
    position: fixed;
    top: 0;
    right: 0;
    left: 240px;
    z-index: 900;
    transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Estilos internos da Topbar */
.top-bar .section-title { color: #003366; font-weight: 700; font-size: 18px; min-width: 150px; }
.top-bar .search-container { flex-grow: 1; margin: 0 30px; position: relative; max-width: 500px; }
.top-bar .search-container input { width: 100%; padding: 9px 15px 9px 40px; border-radius: 8px; border: 1px solid #e0e0e0; background-color: #f8fafc; font-size: 14px; outline: none; transition: all 0.2s; }
.top-bar .search-container input:focus { border-color: #3498db; background-color: #fff; box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.15); }
.top-bar .search-container::before { content: ""; position: absolute; left: 15px; top: 50%; transform: translateY(-50%); width: 16px; height: 16px; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%2394a3b8' viewBox='0 0 24 24'%3E%3Cpath d='M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-size: contain; }
.top-bar .notification-icon { margin-left: auto; margin-right: 25px; cursor: pointer; position: relative; color: #64748b; }
.top-bar .user-profile { display: flex; align-items: center; cursor: pointer; position: relative; padding: 5px 10px; border-radius: 8px; transition: background 0.2s; }
.top-bar .user-profile:hover { background-color: #f1f5f9; }
.top-bar .avatar { width: 38px; height: 38px; border-radius: 50%; margin-right: 12px; overflow: hidden; background-color: #e2e8f0; }
.top-bar .avatar img { width: 100%; height: 100%; object-fit: cover; }
.top-bar .user-info { display: flex; flex-direction: column; line-height: 1.3; }
.top-bar .user-name { font-size: 14px; font-weight: 600; color: #334155; }
.top-bar .user-email { font-size: 12px; color: #64748b; }
.top-bar .dropdown-arrow { margin-left: 10px; width: 12px; height: 12px; opacity: 0.5; transition: transform 0.2s; }


/* === LÓGICA DE COLAPSO (SIDEBAR FECHADA) === */

/* 1. Reduz a largura */
body.sidebar-collapsed .cabecalho {
    width: 70px;
}

/* 2. Ajusta conteúdo e topo */
body.sidebar-collapsed .conteudo-principal {
    margin-left: 70px;
}
body.sidebar-collapsed .top-bar {
    left: 70px;
}

/* 3. Esconde Logo e Texto */
body.sidebar-collapsed .logo-link {
    display: none; 
}
body.sidebar-collapsed .logo-container {
    justify-content: center; 
    padding: 0; 
}

/* 4. HOVER EXPAND: O "Pulo do Gato" */
/* Ao passar o mouse na barra fechada, ela abre por cima do conteúdo */
body.sidebar-collapsed .cabecalho:hover {
    width: 240px;
    box-shadow: 5px 0 20px rgba(0,0,0,0.3); /* Sombra mais forte ao flutuar */
}

/* Mostra o logo de volta no hover */
body.sidebar-collapsed .cabecalho:hover .logo-link {
    display: flex;
}
body.sidebar-collapsed .cabecalho:hover .logo-container {
    justify-content: space-between;
    padding: 0 20px;
}


/* === SEUS ÍCONES SVG (MANTIDOS E ORGANIZADOS) === */

/* Configuração Base do Ícone */
.items-nav a::before, 
.items-nav-login a::before {
    content: "";
    display: inline-block;
    width: 22px;
    height: 22px;
    margin-right: 15px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    opacity: 0.8;
    transition: opacity 0.3s ease;
    flex-shrink: 0;
}

/* ========================================================================== */
/* === ÍCONES DO MENU LATERAL (ORDEM CORRETA) === */
/* ========================================================================== */

/* Configuração Base para todos os ícones */
.items-nav a::before, 
.items-nav-login a::before {
    content: "";
    display: inline-block;
    width: 22px;
    height: 22px;
    margin-right: 15px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    opacity: 0.8;
    transition: opacity 0.3s ease;
    flex-shrink: 0;
}

/* 1. Home (Branco) */
.items-nav:nth-child(1) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z'/%3E%3C/svg%3E"); 
}

/* 2. Diretoria (Dourado) */
.items-nav:nth-child(2) a::before { 
    /* Ícone Chess-King na cor #f1c40f */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23f1c40f' d='M256 72c13.3 0 24 10.7 24 24v40h40c13.3 0 24 10.7 24 24s-10.7 24-24 24h-40v32h72c13.3 0 24 10.7 24 24v16H120v-16c0-13.3 10.7-24 24-24h72v-32h-40c-13.3 0-24-10.7-24-24s10.7-24 24-24h40V96c0-13.3 10.7-24 24-24zm-96 256h192l32 160H128l32-160z'/%3E%3C/svg%3E");
    opacity: 1;
}

/* 3. Suprimentos (Branco) */
.items-nav:nth-child(3) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M3 7l9-4 9 4-9 4-9-4z'/%3E%3Cpath d='M12 11v6'/%3E%3Cpath d='M3 7v6'/%3E%3Cpath d='M21 7v6'/%3E%3Crect x='6' y='14' width='12' height='5' rx='1'/%3E%3Ccircle cx='18' cy='16.5' r='1'/%3E%3C/svg%3E"); 
}

/* 4. Estoque (Branco) */
.items-nav:nth-child(4) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z'/%3E%3C/svg%3E"); 
}

/* 5. Comercial (Branco) */
.items-nav:nth-child(5) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2zM7.16 14l.84-2h8.95c.75 0 1.41-.41 1.75-1.03l3.58-6.49A.996.996 0 0 0 21.42 3H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 13.37 5 14 5.7 14H7.16z'/%3E%3C/svg%3E"); 
}

/* 6. Financeiro (Branco) */
.items-nav:nth-child(6) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11 11-4.925 11-11S18.075 1 12 1zm.5 17.5v1.5h-1v-1.48c-1.84-.16-3.12-1.28-3.23-2.97h1.65c.12.96.89 1.56 2.08 1.56 1.27 0 2.03-.66 2.03-1.54 0-.8-.53-1.24-1.99-1.57l-.88-.2c-1.87-.42-2.87-1.28-2.87-2.83 0-1.62 1.22-2.77 3.03-3.02V5h1v1.48c1.73.19 2.95 1.25 3.08 2.86h-1.64c-.13-.9-.84-1.45-1.94-1.45-1.15 0-1.91.58-1.91 1.47 0 .73.48 1.14 1.84 1.45l.91.2c2.04.45 3.01 1.32 3.01 2.94 0 1.72-1.27 2.88-3.25 3.05z'/%3E%3C/svg%3E"); 
}

/* 7. Comex (Branco) */
.items-nav:nth-child(7) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1h-2v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 3.88-2.62 7.16-6.1 7.93z'/%3E%3C/svg%3E"); 
}

/* 8. RH (Branco) */
.items-nav:nth-child(8) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='9' cy='8' r='3'/%3E%3Cpath d='M4.5 20v-1.2c0-2.5 2-4.8 4.5-4.8s4.5 2.3 4.5 4.8V20'/%3E%3Ccircle cx='16.5' cy='10' r='2.5'/%3E%3Cpath d='M13.5 20v-1.3c0-2 1.6-3.9 3.5-3.9s3.5 1.9 3.5 3.9V20'/%3E%3C/svg%3E"); 
}

/* 9. Manutenções (Branco) */
.items-nav:nth-child(9) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6.2 6.2 9 1.7 4.6c-1.1 2.4-.7 5.4 1.3 7.4 1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z'/%3E%3C/svg%3E"); 
}

/* 10. Produções (Branco) */
.items-nav:nth-child(10) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M18.36 9l.6 3H5.04l.6-3h12.72M20 4H4v2h16V4zm0 3H4l-1 5v2h1v6h10v-6h4v6h2v-6h1v-2l-1-5zM6 18v-4h6v4H6z'/%3E%3C/svg%3E"); 
}

/* 11. Expedição (Branco) */
.items-nav:nth-child(11) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M12%202a10%2010%200%201%200%200%2020%2010%2010%200%200%200%200-20zm3.5%206.5-2%205-5%202%202-5%205-2z'/%3E%3C/svg%3E");
}

/* 12. Movimentações (Branco) */
.items-nav:nth-child(12) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z'/%3E%3C/svg%3E"); 
}

/* 13. Consulta (Branco) */
.items-nav:nth-child(13) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z'/%3E%3C/svg%3E"); 
}

/* 14. Relatórios (Branco) */
.items-nav:nth-child(14) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z'/%3E%3C/svg%3E"); 
}

/* 15. Suporte (Branco) */
.items-nav:nth-child(15) a::before { 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91 3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z'/%3E%3C/svg%3E"); 
}

/* Responsividade */
@media (max-width: 992px) {
    /* No mobile, funciona igual ao modo colapsado */
    .cabecalho { width: 70px; overflow: hidden; }
    .cabecalho:hover { width: 240px; }
    .logo-link { display: none; }
    .cabecalho:hover .logo-link { display: flex; }
    .logo-container { justify-content: center; padding: 0; }
    .cabecalho:hover .logo-container { justify-content: space-between; padding: 0 20px; }
    .conteudo-principal, .top-bar { margin-left: 70px; left: 70px; width: calc(100% - 70px); }
    .top-bar .user-info { display: none; }
}

@media (max-width: 576px) {
    .top-bar .section-title { display: none; }
    .top-bar .search-container { margin: 0 10px; }
}

/* ========================================================================== */
/* === SEGURANÇA VISUAL (ANTI-FLASH) - CORRIGIDO === */
/* ========================================================================== */

/* 1. Esconde tudo por padrão se não tiver a permissão */
body:not(.access-granted) .conteudo-principal,
body:not(.access-granted) .top-bar,
body:not(.access-granted) .cabecalho {
    display: none !important;
}

/* 2. Libera o MENU LATERAL (Sidebar) */
body.access-granted .cabecalho {
    display: flex !important; /* A sidebar usa flex-direction: column */
    animation: fadeInContent 0.3s ease-out forwards;
}

/* 3. Libera a BARRA SUPERIOR (Top Bar) */
body.access-granted .top-bar {
    display: flex !important; /* A topbar usa flex para alinhar itens */
    animation: fadeInContent 0.3s ease-out forwards;
}

/* 4. Libera o CONTEÚDO PRINCIPAL (Correção aqui: usa BLOCK, não FLEX) */
body.access-granted .conteudo-principal {
    display: block !important; /* CORREÇÃO: Isso mantém os elementos empilhados */
    animation: fadeInContent 0.5s ease-out forwards;
}

/* Animação suave de entrada */
@keyframes fadeInContent {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* No final do base.css */

/* Garante que o conteúdo principal nunca ultrapasse a tela, forçando scroll se necessário */
.conteudo-principal {
    max-width: 100%;
    overflow-x: hidden; /* Evita barra de rolagem horizontal indesejada */
    box-sizing: border-box;
}

/* Imagens e gráficos responsivos */
img, canvas {
    max-width: 100%;
    height: auto;
}

/* Ajuste de texto para telas muito pequenas (zoom alto) */
@media (max-width: 480px) {
    body { font-size: 13px; }
    h1 { font-size: 20px; }
    h2 { font-size: 18px; }
}